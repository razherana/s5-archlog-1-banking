<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gestion des Utilisateurs - Banking Interface</title>
    <link rel="stylesheet" href="../styles.css" />
  </head>
  <body>
    <div class="header">
      <h1>Banking Interface System</h1>
    </div>

    <div class="container">
      <div class="user-info">
        <span>Welcome, <strong th:text="${userAdminName}">Admin</strong></span>
        <a href="../logout" class="logout-link">Logout</a>
        <div style="clear: both"></div>
      </div>

      <div class="card">
        <h2 class="text-center">Gestion des Utilisateurs</h2>
        <p class="text-center" style="margin-bottom: 2rem">
          <a href="../menu.html">← Retour au menu principal</a>
        </p>

        <!-- Error Messages -->
        <div th:if="${param.error}" class="alert alert-error">
          <p th:text="${param.error[0]}">Erreur</p>
        </div>

        <!-- Success Messages -->
        <div th:if="${param.success}" class="alert alert-success">
          <p th:text="${param.success[0]}">Succès</p>
        </div>

        <!-- Create User Button -->
        <div class="form-actions" style="margin-bottom: 2rem">
          <a href="users/create" class="btn btn-success"
            >Créer un Nouvel Utilisateur</a
          >
        </div>

        <!-- Users Table -->
        <div th:if="${users != null and !#lists.isEmpty(users)}">
          <table class="accounts-table">
            <thead>
              <tr>
                <th>ID</th>
                <th>Nom</th>
                <th>Email</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              <tr th:each="user : ${users}">
                <td th:text="${user.id}">1</td>
                <td th:text="${user.name}">John Doe</td>
                <td th:text="${user.email}">john@example.com</td>
                <td>
                  <a
                    th:href="@{users/edit(id=${user.id})}"
                    class="btn btn-primary btn-small"
                  >
                    Modifier
                  </a>
                  <form
                    method="post"
                    th:action="@{users/delete}"
                    style="display: inline-block; margin-left: 0.5rem"
                    onsubmit="return confirm('Êtes-vous sûr de vouloir supprimer cet utilisateur ?')"
                  >
                    <input type="hidden" name="id" th:value="${user.id}" />
                    <button type="submit" class="btn btn-secondary btn-small">
                      Supprimer
                    </button>
                  </form>
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- No Users Message -->
        <div
          th:if="${users == null or #lists.isEmpty(users)}"
          class="alert alert-info"
        >
          <p>Aucun utilisateur trouvé dans le système.</p>
        </div>

        <!-- Information Section -->
        <div class="info-section">
          <h3>Informations importantes</h3>
          <ul>
            <li>
              <strong>Création:</strong> Créez de nouveaux utilisateurs avec
              nom, email et mot de passe
            </li>
            <li>
              <strong>Modification:</strong> Modifiez les informations des
              utilisateurs existants
            </li>
            <li>
              <strong>Suppression:</strong> Supprimez des utilisateurs (vous ne
              pouvez pas supprimer votre propre compte)
            </li>
            <li>
              <strong>Email unique:</strong> Chaque utilisateur doit avoir une
              adresse email unique
            </li>
            <li>
              <strong>Sécurité:</strong> Les mots de passe sont gérés de manière
              sécurisée
            </li>
          </ul>
        </div>
      </div>
    </div>
  </body>
</html>
